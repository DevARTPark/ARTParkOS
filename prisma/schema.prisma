generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  // URL is configured in prisma.config.ts
}

// --- ENUMS ---

enum Role {
  founder
  admin
  reviewer
  mentor
  supplier
  lab_owner
}

enum UserStatus {
  invited
  active
  suspended
}

enum TokenType {
  account_activation
  password_reset
}

// --- CORE IDENTITY ---

model User {
  id            String    @id @default(uuid())
  email         String    @unique
  password_hash String?
  role          Role
  status        UserStatus @default(invited)
  last_login    DateTime?
  created_at    DateTime  @default(now())
  updated_at    DateTime  @updatedAt

  // Relations
  tokens        AuthToken[]
  founderProfile FounderProfile? // <--- ADDED THIS RELATION

  @@map("users")
}

model AuthToken {
  id         String    @id @default(uuid())
  user_id    String
  user       User      @relation(fields: [user_id], references: [id], onDelete: Cascade)
  token      String    @unique
  type       TokenType
  expires_at DateTime
  is_used    Boolean   @default(false)
  created_at DateTime  @default(now())

  @@map("auth_tokens")
}

// ... (Previous User model remains the same)

// ... existing code ...

model FounderProfile {
  id          String   @id @default(uuid())
  userId      String   @unique
  user        User     @relation(fields: [userId], references: [id])

  // Personal Details
  founderName String?
  phone       String?
  designation String?
  avatarUrl   String?  @db.Text // <--- NEW: Store Base64 image string here

  // Company Details
  startupName String   @default("My Startup")
  tagline     String?
  description String?
  website     String?
  logoUrl     String?
  
  // Business Info
  industry    String?
  stage       String?
  location    String?
  teamSize    Int?     @default(1)
  foundedYear Int?     @default(2024)

  updatedAt   DateTime @updatedAt
  
  @@map("founder_profiles")
}